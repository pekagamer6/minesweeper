<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infinite Minesweeper</title>
  <style>
    body { margin: 0; background: #0d1421; color: #e2e8f0; font-family: Arial, sans-serif; height: 100vh; display: flex; flex-direction: column; }
    header { background: rgba(13,20,33,0.9); padding: 1rem; text-align: center; font-size: 1.8rem; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
    .icon { cursor: pointer; font-size: 1.5rem; padding: 0 1rem; }
    #statsBar { display: flex; justify-content: center; gap: 1rem; background: rgba(15,22,35,0.95); padding: 0.8rem; border-radius: 2rem; margin: 1rem auto; width: fit-content; box-shadow: 0 8px 32px rgba(0,0,0,0.4); }
    .stat { display: flex; align-items: center; gap: 0.5rem; background: rgba(30,41,59,0.8); padding: 0.5rem 1rem; border-radius: 2rem; }
    .level { color: #34d399; }
    .mines { color: #f87171; }
    .flags { color: #fbbf24; }
    .time { color: #60a5fa; }
    #boardContainer { flex: 1; display: flex; justify-content: center; align-items: center; }
    #board { display: grid; gap: 6px; padding: 1.5rem; background: rgba(15,22,35,0.8); border-radius: 1.5rem; box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
    .cell { width: 40px; height: 40px; background: linear-gradient(145deg, #2d3748, #1a202c); border-radius: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
    .cell:hover:not(.revealed) { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(96,165,250,0.3); }
    .revealed { background: #1e293b !important; box-shadow: inset 0 4px 12px rgba(0,0,0,0.5); }
    .flagged::before { content: 'üö©'; }
    .mine { background: #ef4444 !important; }
    #hint { text-align: center; padding-bottom: 1rem; color: #94a3b8; }
  </style>
</head>
<body>
  <header>
    <div class="icon">üè†</div>
    <div>MINESWEEPER</div>
    <div class="icon">‚Ü∫</div>
    <div class="icon">üìä</div>
    <div class="icon">‚öô</div>
  </header>

  <div id="statsBar">
    <div class="stat level">üèÜ LEVEL <span id="level">1</span></div>
    <div class="stat mines">üí£ MINES <span id="mines">4</span></div>
    <div class="stat flags">üö© FLAGS <span id="flags">0</span></div>
    <div class="stat time">‚è± TIME <span id="timer">00:00</span></div>
  </div>

  <div id="boardContainer">
    <div id="board"></div>
  </div>

  <p id="hint">Left click: reveal ‚Ä¢ Right click: flag</p>

  <script>
    let rows = 10, cols = 10, totalMines = 4;
    let board = [];
    let gameOver = false;
    let firstClick = true;
    let timer = 0;
    let timerInterval;
    let flags = 0;
    let revealed = 0;

    const boardEl = document.getElementById('board');
    const levelEl = document.getElementById('level');
    const minesEl = document.getElementById('mines');
    const flagsEl = document.getElementById('flags');
    const timerEl = document.getElementById('timer');

    function initGame() {
      boardEl.innerHTML = '';
      board = [];
      flags = 0;
      revealed = 0;
      gameOver = false;
      firstClick = true;
      timer = 0;
      timerEl.textContent = '00:00';
      clearInterval(timerInterval);
      boardEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
      for (let r = 0; r < rows; r++) {
        board[r] = [];
        for (let c = 0; c < cols; c++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          cell.dataset.r = r;
          cell.dataset.c = c;
          cell.addEventListener('click', leftClick);
          cell.addEventListener('contextmenu', rightClick);
          boardEl.appendChild(cell);
          board[r][c] = { mine: false, revealed: false, flagged: false, adj: 0 };
        }
      }
      minesEl.textContent = totalMines;
      flagsEl.textContent = flags;
    }

    function leftClick(e) {
      if (gameOver) return;
      const r = +e.target.dataset.r;
      const c = +e.target.dataset.c;
      if (board[r][c].flagged || board[r][c].revealed) return;
      if (firstClick) {
        firstClick = false;
        placeMines(r, c);
        startTimer();
      }
      if (board[r][c].mine) {
        gameOver = true;
        e.target.classList.add('mine');
        revealAll();
        boardEl.classList.add('shake');
        return;
      }
      floodReveal(r, c);
      checkWin();
    }

    function rightClick(e) {
      e.preventDefault();
      if (gameOver || firstClick) return;
      const r = +e.target.dataset.r;
      const c = +e.target.dataset.c;
      if (board[r][c].revealed) return;
      board[r][c].flagged = !board[r][c].flagged;
      e.target.classList.toggle('flagged');
      flags += board[r][c].flagged ? 1 : -1;
      flagsEl.textContent = flags;
      checkWin();
    }

    function placeMines(exR, exC) {
      let placed = 0;
      while (placed < totalMines) {
        const r = Math.floor(Math.random() * rows);
        const c = Math.floor(Math.random() * cols);
        if (board[r][c].mine || (r === exR && c === exC)) continue;
        board[r][c].mine = true;
        placed++;
      }
      calcAdj();
    }

    function calcAdj() {
      for (let r = 0; r < rows; r++) for (let c = 0; c < cols; c++) if (!board[r][c].mine) {
        let count = 0;
        for (let dr = -1; dr <= 1; dr++) for (let dc = -1; dc <= 1; dc++) {
          const nr = r + dr, nc = c + dc;
          if (nr >= 0 && nr < rows && nc >= 0 && nc < cols && board[nr][nc].mine) count++;
        }
        board[r][c].adj = count;
      }
    }

    function floodReveal(r, c) {
      if (r < 0 || r >= rows || c < 0 || c >= cols || board[r][c].revealed || board[r][c].flagged) return;
      board[r][c].revealed = true;
      revealed++;
      const cell = boardEl.querySelector(`[data-r="${r}"][data-c="${c}"]`);
      cell.classList.add('revealed');
      if (board[r][c].adj > 0) {
        cell.textContent = board[r][c].adj;
        cell.classList.add(`num${board[r][c].adj}`);
      } else {
        for (let dr = -1; dr <= 1; dr++) for (let dc = -1; dc <= 1; dc++) floodReveal(r + dr, c + dc);
      }
    }

    function revealAll() {
      for (let r = 0; r < rows; r++) for (let c = 0; c < cols; c++) if (board[r][c].mine) {
        const cell = boardEl.querySelector(`[data-r="${r}"][data-c="${c}"]`);
        cell.classList.add('mine');
        cell.textContent = 'üí£';
      }
    }

    function checkWin() {
      if (revealed + totalMines === rows * cols) {
        gameOver = true;
        clearInterval(timerInterval);
        alert('Win!');
      }
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        timer++;
        const m = String(Math.floor(timer / 60)).padStart(2, '0');
        const s = String(timer % 60).padStart(2, '0');
        timerEl.textContent = `${m}:${s}`;
      }, 1000);
    }

    initGame();
  </script>
</body>
</html>
